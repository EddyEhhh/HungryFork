<!DOCTYPE html>
<html lang="en">

<head>
    <title>Movies Review Website</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <div style="background-color:Black"></div>
    <link href="css/mystyle.css" rel="stylesheet">
    <link href="css/overlay.css" rel="stylesheet">
    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
          integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" rel="stylesheet">
    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
          rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>


    <script src="js/app.js"></script>
    <script src="js/comments.js"></script>
    <script src="js/movies.js"></script>
    <script src="js/carousell.js"></script>
    <script src="js/app.js"></script>
    <script src="js/explore.js"></script>
    <script src="js/reviews.js"></script>

</head>

<body style="background-color:black;">

<header>
    <div class="container"></div>
    <a href="index.html"><img alt="logo" class="logo" src="images/logoWhite.png">
        <img alt="logo" class="logo" src="images/titleName.png"></a>
    <div class="usernameText" id="username"></div>
    <a class="loginButton" href="#" id="loginButton" onclick="document.getElementById('id01').style.display='block'"
       style="visibility: hidden"><img class="profileLogo"
                                                                            src="images/profile.png">Login</a>
    <a class="registerButton" href="#" id="registerButton" onclick="document.getElementById('id02').style.display='block'"
       style="visibility: hidden"><img class="profileLogo"
                                                                            src="images/home/registerLogo.png">Register</a>
    <a class="logoutButton" href="#" id="logoutButton" onclick="logout()" style="visibility: hidden"><img
            class="profileLogo" src="images/home/registerLogo.png">Logout</a>
    <div class="topnav-centered">
        <nav>

            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a class="active" href="#">Explore</a></li>
                <li><a href="#" onclick="document.getElementById('contact').style.display='block'">Contacts</a></li>

    </div>


    </nav>
    <div class="menu-toggle"></div>


    </div>

</header>
<script crossorigin="anonymous" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('.menu-toggle').click(function () {
            $('.menu-toggle').toggleClass('active');
            $('nav').toggleClass('active')

        })
    })
</script>


<form autocomplete="off" action="/searchRestaurant" class="search-box2">
    <div class="autocomplete" style="width:300px;">
        <input class="search-txt2" id="myInput" type="text" name="id" placeholder="Search">
    </div>
    <a type ="submit" class="search-btn2" type="images">
        <i class="fas fa-search"></i>
    </a>
    </div>
</form>

<div class="search-box3" href="#">
    <a class="search-btn3" href="#" type="images">
        <img class="searchFilter" src="images/searchFilter.png">
    </a>
</div>




</head>


<div class="modal" id="restaurant1">

    <form class="modal-content animate" style="overflow: scroll; overflow-x: hidden; width:700px; height:80%;">

                    <span class="close" onclick="document.getElementById('restaurant1').style.display='none'"
                          style="color:crimson"
                          title="Close Modal">&times;</span>

        <div>
            <img class="img-banner" src="images/restaurant/restaurant1Banner.png">
        </div>

        <h2 style="color:black; padding-left: 0px; margin-top: 10px; margin-left: 20px;"><b>Mpire
            Restaurant & Bar</b>
        </h2>


        <p style="margin-left:550px; margin-top:-45px; font-size: 25px; color:black;">
            <i class="fa fa-star" style="margin-top: -30px; margin-left: -20px; color:gold;"></i>
            4.8/5 (1k+)
        </p>

        <h1 style="color:#000;">
            <hr style="border:0.5px solid #000;margin-top: 0px;">
            <img src="images/tempRestaurantCatergory1.png" style="float: left; margin-left: 20px;"></h1>
        <h1 style="color:#000;">
            <hr style="border:0.5px solid #000;margin-top: 0px;">
        </h1>
        <p style="padding: 20px; margin-top: -30px; color:black;">Mpire Restaurant & Bar could be your best
            kept secret in the CBD, offering unpretentious
            good quality food at even better prices, and service that makes our customers walk away
            with big smiles on their faces. Our bar is the best place to stop by for a tipple with your
            pals.</p>
        <p style="padding: 20px; margin-top: -30px; color:black;"><b>Address</b></p>
        <p style="padding: 20px; margin-top: -60px; color:black;">77 Amoy St, Singapore 069896</p>


        <p style="padding: 20px; margin-top: -30px; color:black;"><b>Opening Hours</b></p>
        <p style="padding: 20px; margin-top: -60px; color:black;">Every Mon â€“ Thurs: 11am - 11:30pm</p>
        <p style="padding: 20px; margin-top: -60px; color:black;">Every Fri: 11am - 12am</p>
        <p style="padding: 20px; margin-top: -60px; color:black;">Every Sat & PH: 4pm - 11pm</p>
        <p style="padding: 20px; margin-top: -60px; color:black;">Closed every Sunday</p>

        <p style="padding: 20px; margin-top: -30px; color:black;"><b>Phone</b></p>
        <p style="padding: 20px; margin-top: -60px; color:black;">6226 0287</p>

        <p>
            <iframe allowfullscreen=""
                    frameborder="0" height="200"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.8218831140334!2d103.84445461475391!3d1.2805456990660145!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31da196fde684eab%3A0xa19164877a99c0be!2sMpire!5e0!3m2!1sen!2ssg!4v1579783559420!5m2!1sen!2ssg"
                    style="border:0;"
                    style="float: right; padding:20px; margin-top: -295px" width="250"></iframe>
        </p>

        <h1 style="color:#000;">
            <hr style="width: 93%; border:0.5px solid #000;margin-top: 0px;">
        </h1>

        <h2 style="color:black; padding-left: 0px; margin-top: 10px; margin-left: 20px;"><b>Review</b>
        </h2>

        <button onclick="pop()" style="padding: 10px; width: 150px; margin-top: -55px; margin-left: 520px;">Post
            a review
        </button>

        <p style="margin-left:180px; margin-top:-45px; font-size: 25px; color:black;">
            <i class="fa fa-star" style="margin-top: -30px; margin-left: -20px; color:#FF9800;"></i>
            4.8/5 (1321)
        </p>


        <p></p>
        <img src="images/restaurant/reviewSet1.png" style="float: center; margin-left: 20px"></h1>

    </form>
</div>



<script>
    function logout() {
        sessionStorage.setItem("loggedIn", false)
        window.location.href = "/"
    }

    // usernmae form login.html has been added as query so we need to
    // get the value fo username fromthe query string. we can do this by using a
    // built-in javascript function called URLSearchParams which makes use of
    // the built-in 'window.location.search'property.
    var urlParams = new URLSearchParams(window.location.search);

    // We then use the built-in getAll function and passin the key of the query string
    // which is 'username' to get its value;
    var username = urlParams.getAll('username')
    var loginError = urlParams.getAll('loginError')
    if (loginError == 1) {
        sessionStorage.setItem("loggedIn", false)
        window.location.href = "/"
    } else if (loginError == 2) {
        sessionStorage.setItem("loggedIn", false)
        window.location.href = "/"
    } else if (username != "") {
        sessionStorage.setItem("username", username)
        sessionStorage.setItem("loggedIn", true)
        console.log(urlParams.getAll('username'))
        window.location.href = "/"
    }
    console.log(sessionStorage.getItem("loggedIn"))


    // Once we ge tthe value fo username from the query string,
    // we will set the Welcome message to the div with id='welcome'
    console.log("Welcome " + username + "!");
</script>

<div class="modal" id="id01">

    <form action="login" class="modal-content animate" method="post" style="width:500px">
        <div class="imgcontainer" id="login-box">
            <span class="close" onclick="document.getElementById('id01').style.display='none'" title="Close Modal">&times;</span>
            <img src="images/Home/loginLogo.png">
        </div>

        <div class="container2">
            <input id="username" name="uname" placeholder="Username" required type="text">

            <input id="user_password" name="psw" placeholder="Password" required type="password">
            <p></p>

            <button type="submit">Login</button>
            <label>
                <input checked="checked" name="remember" type="checkbox"> Remember me
            </label>
        </div>

        <div class="container2" style="background-color:#f1f1f1">

                    <span class="psw"><a href="#">Forgot Password</a>

        </div>
    </form>
</div>


<div class="modal" id="id02">
    <form action="/action_page.php" class="modal-content animate" method="put" style="width:500px">
        <div class="imgcontainer">
            <span class="close" onclick="document.getElementById('id02').style.display='none'" title="Close Modal">&times;</span>
            <img src="images/Home/registerIcon.png">
        </div>

        <div class="container2">

            <input name="uname" placeholder="Username" required type="text">
            <p></p>
            <input name="email" placeholder="Email" required type="text">
            <p></p>
            <input name="Mobile" placeholder="Mobile Number" required type="text">
            <p></p>
            <input name="psw" placeholder="Password" required type="password">
            <p></p>
            <input name="psw-repeat" placeholder="Confirm Password" required type="password">
            <p></p>

            <form>
                <select name="Gender">
                    <option selected value="Male">M</option>
                    <option value="Female">F</option>
                    <option value="Others">O</option>
                </select>
            </form>
            <p></p>


            <p>By creating an account you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a>.</p>

            <div class="clearfix">
                <button class="signupbtn" type="submit">Sign Up</button>
            </div>
        </div>
    </form>
</div>

<div class="modal" id="contact">
    <form action="/action_page.php" class="modal-content animate" method="put" style="width:500px">
        <div class="imgcontainer">
            <span class="close" onclick="document.getElementById('contact').style.display='none'" title="Close Modal">&times;</span>
            <img src="images/Home/contactUsInfo.png">
        </div>

        <div class="container2">

            <input name="uname" placeholder="Name" required type="text">
            <p></p>
            <input name="email" placeholder="Email" required type="text">
            <p></p>
            <input name="psw" placeholder="Phone(Optional)" type="text">
            <p></p>
            <textarea name="description" placeholder="    Message" required
                      style="height: 100px; width: 100%; resize:none;"></textarea>
            <p></p>


            <div class="container">
                <div class="row">
                    <div class="col-sm-12">

                        <p class="blackText1">Tel: 9123 4567 </p>
                        <p class="blackText1">Fax: 9123 4568</p>
                        <p class="blackText1">Email: Hungry@Fork.com</p>
                    </div>


                </div>

                <p class="blackTitle1" style="position:absolute; right:25px; bottom: 50px;"><b>Find Us!</b></p>
                <p class="blackText1" style="position:absolute; right:-10px; bottom: 0px; "><a
                        href="http://instagram.com"><img
                        class="socialIcon" src="images/Home/Instagram.png"></a>
                    <a href="http://facebook.com"><img class="socialIcon" src="images/Home/Facebook.png"></a>
                    <a href="http://Twitter.com"><img class="socialIcon" src="images/Home/Twitter.png"></a></p>


            </div>


            <div class="clearfix" style="position:absolute; bottom: 110px; right:15px; width: 30%;">
                <button class="sendMessage" type="submit">Send</button>
            </div>
        </div>
    </form>
</div>


<script>
    // Get the modal
    var restaurant1 = document.getElementById('restaurant1');


    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == restaurant1) {
            restaurant1.style.display = "none";
        }
    }
    function autocomplete(inp, arr, numbers) {
        /*the autocomplete function takes two arguments,
        the text field element and an array of possible autocompleted values:*/
        var currentFocus;
        /*execute a function when someone writes in the text field:*/
        inp.addEventListener("input", function(e) {
            var a, b, i, val = this.value;
            /*close any already open lists of autocompleted values*/
            closeAllLists();
            if (!val) { return false;}
            currentFocus = -1;
            /*create a DIV element that will contain the items (values):*/
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            /*append the DIV element as a child of the autocomplete container:*/
            this.parentNode.appendChild(a);
            /*for each item in the array...*/
            for (i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    /*create a DIV element for each matching element:*/
                    b = document.createElement("DIV");
                    /*make the matching letters bold:*/
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    /*insert a input field that will hold the current array item's value:*/
                    b.innerHTML += "<input id='test' type='hidden' value='" + numbers[i] + "'>";
                    /*execute a function when someone clicks on the item value (DIV element):*/
                    b.addEventListener("click", function(e) {
                        /*insert the value for the autocomplete text field:*/
                        inp.value = this.getElementsByTagName("input")[0].value;
                        /*close the list of autocompleted values,
                        (or any other open lists of autocompleted values:*/
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });
        /*execute a function presses a key on the keyboard:*/
        inp.addEventListener("keydown", function(e) {
            var x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) {
                /*If the arrow DOWN key is pressed,
                increase the currentFocus variable:*/
                currentFocus++;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 38) { //up
                /*If the arrow UP key is pressed,
                decrease the currentFocus variable:*/
                currentFocus--;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 13) {
                /*If the ENTER key is pressed, prevent the form from being submitted,*/
                e.preventDefault();
                if (currentFocus > -1) {
                    /*and simulate a click on the "active" item:*/
                    if (x) x[currentFocus].click();
                }
            }
        });
        function addActive(x) {
            /*a function to classify an item as "active":*/
            if (!x) return false;
            /*start by removing the "active" class on all items:*/
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            /*add class "autocomplete-active":*/
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            /*a function to remove the "active" class from all autocomplete items:*/
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }
        function closeAllLists(elmnt) {
            /*close all autocomplete lists in the document,
            except the one passed as an argument:*/
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }
        /*execute a function when someone clicks in the document:*/
        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }

    /*An array containing all the country names in the world:*/
    var countries = ["a", "b", "c"];
    var numbers = [1, 2, 3]

    /*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/

    restauransArray = []
    $.ajax({
        url: "/restaurant",
        type: 'GET',
        dataType: 'json', // added data type
        success: function(res) {
            console.log(res);
            addToList(res);
        }
    });

    function addToList(restaurants){
        ids = []
        names = []
        for (var x = 0; x < restaurants.length; x++){
            console.log(restaurants[x])
            ids.push(restaurants[x].restaurant_id)
            names.push(restaurants[x].restaurant_name)
        }
        autocomplete(document.getElementById("myInput"), names, ids);
    }

    function getRestaurant(){
        console.log("hi")
    }

</script>

<body onload="getRestaurantData()">
<!--This is where the top navigation HTML codes will be loaded-->
<!-- This is the container that holds the initial message, heading, and movies -->
<div class="container" style="margin-top: 200px;">
    <!-- The message will be shown when the page loads and will
    disappear after the movies are loaded -->
    <div class="row" id="parent">
        Retrieving restaurant from database... Please wait...<br><br>
        If you are seeing this message for a long time, it is likely
        that you have a JavaScript error. Troubleshoot your script by
        using the browser console panel now. Please use either Firefox
        or Chrome to render this webpage.
    </div>
    <p>
        <!-- This is the heading showing how many movies are there -->
    <h3 id="summary"></h3>
    </p>
    <!-- Displays thumbnails of the movies here -->
    <div class="row" id="restaurantsTable"></div>
</div>
<div w3-include-html="restaurants.html"></div>

<br><br>
</body>
<script src="js/w3.js"></script>
<script>
        //to bring in other HTML on the fly into this page
        w3.includeHTML();
</script>

</body>



    
<style>
    input[type=text],
    input[type=password] {
        margin: 8px 0;
    }

    /* Set a style for all buttons */
</style>

<script>

    if (sessionStorage.getItem("loggedIn") == "false") {
        document.getElementById("loginButton").style.visibility = "visible"
        document.getElementById("registerButton").style.visibility = "visible"
    } else {
        var text = document.createTextNode(sessionStorage.getItem("username"))
        document.getElementById("username").appendChild(text)
        document.getElementById("logoutButton").style.visibility = "visible"
    }
    //to bring in other HTML on the fly into this page
    w3.includeHTML();
</script>

</html>